CREATE TABLE IF NOT EXISTS "Tenant" (
  "id" uuid NOT NULL,
  "name" text NOT NULL,
  "plan" text NOT NULL,
  PRIMARY KEY ("id"),
  UNIQUE ("name")
);
COMMENT ON TABLE "Tenant" IS 'uid: tbl:Tenant';
COMMENT ON COLUMN "Tenant"."id" IS 'uid: col_tenant_id';
COMMENT ON COLUMN "Tenant"."name" IS 'uid: col_tenant_name';
COMMENT ON COLUMN "Tenant"."plan" IS 'uid: col_tenant_plan';
CREATE TABLE IF NOT EXISTS "User" (
  "id" uuid NOT NULL,
  "email" text NOT NULL,
  "tenantId" uuid NOT NULL,
  "role" text NOT NULL,
  PRIMARY KEY ("id"),
  UNIQUE ("email"),
  FOREIGN KEY ("tenantId") REFERENCES "Tenant"("id") ON DELETE NO ACTION
);
COMMENT ON TABLE "User" IS 'uid: tbl:User';
COMMENT ON COLUMN "User"."id" IS 'uid: col_user_id';
COMMENT ON COLUMN "User"."email" IS 'uid: col_user_email';
COMMENT ON COLUMN "User"."tenantId" IS 'uid: col_user_tenantid';
COMMENT ON COLUMN "User"."role" IS 'uid: col_user_role';
CREATE INDEX IF NOT EXISTS "User_tenantId_idx" ON "User" ("tenantId");
COMMENT ON INDEX "User_tenantId_idx" IS 'uid: idx_user_tenantid';
CREATE TABLE IF NOT EXISTS "Project" (
  "id" uuid NOT NULL,
  "name" text NOT NULL,
  "tenantId" uuid NOT NULL,
  "ownerId" uuid NOT NULL,
  "settings" jsonb,
  PRIMARY KEY ("id"),
  FOREIGN KEY ("tenantId") REFERENCES "Tenant"("id") ON DELETE NO ACTION,
  FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE NO ACTION
);
COMMENT ON TABLE "Project" IS 'uid: tbl:Project';
COMMENT ON COLUMN "Project"."id" IS 'uid: col_project_id';
COMMENT ON COLUMN "Project"."name" IS 'uid: col_project_name';
COMMENT ON COLUMN "Project"."tenantId" IS 'uid: col_project_tenantid';
COMMENT ON COLUMN "Project"."ownerId" IS 'uid: col_project_ownerid';
COMMENT ON COLUMN "Project"."settings" IS 'uid: col_project_settings';
CREATE INDEX IF NOT EXISTS "Project_tenantId_idx" ON "Project" ("tenantId");
COMMENT ON INDEX "Project_tenantId_idx" IS 'uid: idx_project_tenantid';
CREATE INDEX IF NOT EXISTS "Project_ownerId_idx" ON "Project" ("ownerId");
COMMENT ON INDEX "Project_ownerId_idx" IS 'uid: idx_project_ownerid';
