{
  "version": "1.0.0",
  "metadata": {
    "sourceHash": "sha256:abc123def456...",
    "generatedAt": "2024-01-01T00:00:00Z",
    "schemaName": "StartupGraveyard"
  },
  "tables": [
    {
      "name": "Founder",
      "description": "The visionaries who convinced VCs to part with their money",
      "directives": {
        "table": true,
        "rls": {
          "enable": true
        }
      },
      "fields": [
        {
          "name": "id",
          "type": {
            "base": "ID",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "pk": true,
            "default": {
              "value": "gen_random_uuid()",
              "isSQL": true
            }
          }
        },
        {
          "name": "name",
          "type": {
            "base": "String",
            "isList": false
          },
          "nullable": false,
          "directives": {}
        },
        {
          "name": "twitter_handle",
          "type": {
            "base": "String",
            "isList": false
          },
          "nullable": true,
          "directives": {
            "unique": true
          }
        },
        {
          "name": "linkedin_title",
          "type": {
            "base": "String",
            "isList": false
          },
          "nullable": false,
          "directives": {},
          "description": "Serial Entrepreneur | Thought Leader | Disruptor"
        },
        {
          "name": "previous_failures",
          "type": {
            "base": "Int",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "default": {
              "value": 0,
              "isSQL": false
            }
          }
        },
        {
          "name": "total_raised_lifetime",
          "type": {
            "base": "Decimal",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "default": {
              "value": "0.00",
              "isSQL": false
            }
          }
        },
        {
          "name": "is_currently_pivoting",
          "type": {
            "base": "Boolean",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "default": {
              "value": false,
              "isSQL": false
            }
          }
        },
        {
          "name": "created_at",
          "type": {
            "base": "DateTime",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "default": {
              "value": "now()",
              "isSQL": true
            }
          }
        }
      ],
      "indexes": [
        {
          "name": "founder_twitter_handle_idx",
          "table": "Founder",
          "fields": ["twitter_handle"],
          "unique": true,
          "using": "btree"
        }
      ],
      "constraints": [
        {
          "name": "founder_pkey",
          "type": "primary_key",
          "table": "Founder",
          "definition": "PRIMARY KEY (id)"
        },
        {
          "name": "founder_twitter_handle_unique",
          "type": "unique",
          "table": "Founder",
          "definition": "UNIQUE (twitter_handle)"
        }
      ]
    },
    {
      "name": "Startup",
      "description": "The actual companies (may they rest in peace)",
      "directives": {
        "table": true,
        "tenant": {
          "field": "investor_id"
        },
        "softDelete": true,
        "rls": {
          "enable": true,
          "policies": [
            {
              "name": "tenant_isolation",
              "operation": "ALL",
              "using": "investor_id = current_setting('app.investor_id')::uuid"
            }
          ]
        }
      },
      "fields": [
        {
          "name": "id",
          "type": {
            "base": "ID",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "pk": true,
            "default": {
              "value": "gen_random_uuid()",
              "isSQL": true
            }
          }
        },
        {
          "name": "name",
          "type": {
            "base": "String",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "unique": true
          }
        },
        {
          "name": "lifetime_days",
          "type": {
            "base": "Int",
            "isList": false
          },
          "nullable": true,
          "directives": {
            "computed": {
              "expression": "EXTRACT(DAY FROM (COALESCE(death_date, NOW()) - founded_date))",
              "stored": true
            }
          }
        },
        {
          "name": "total_funding",
          "type": {
            "base": "Decimal",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "default": {
              "value": "0.00",
              "isSQL": false
            },
            "check": "total_funding >= 0"
          }
        },
        {
          "name": "founder_id",
          "type": {
            "base": "ID",
            "isList": false
          },
          "nullable": false,
          "directives": {
            "fk": {
              "targetTable": "Founder",
              "targetField": "id",
              "onDelete": "RESTRICT"
            }
          }
        },
        {
          "name": "deleted_at",
          "type": {
            "base": "DateTime",
            "isList": false
          },
          "nullable": true,
          "directives": {},
          "description": "Soft delete timestamp"
        }
      ],
      "indexes": [
        {
          "name": "startup_founder_id_idx",
          "table": "Startup",
          "fields": ["founder_id"],
          "unique": false,
          "using": "btree"
        },
        {
          "name": "startup_investor_id_idx",
          "table": "Startup",
          "fields": ["investor_id"],
          "unique": false,
          "using": "btree"
        }
      ],
      "constraints": [
        {
          "name": "startup_founder_id_fkey",
          "type": "foreign_key",
          "table": "Startup",
          "definition": "FOREIGN KEY (founder_id) REFERENCES Founder(id) ON DELETE RESTRICT"
        }
      ]
    }
  ],
  "enums": [
    {
      "name": "DeathCause",
      "values": [
        "RAN_OUT_OF_MONEY",
        "PRODUCT_MARKET_FIT_404",
        "FOUNDER_DRAMA",
        "ACQUIRED_BY_FACEBOOK",
        "PIVOT_TO_CRYPTO",
        "PIVOT_FROM_CRYPTO",
        "AI_HYPE_EXPIRED",
        "ACTUAL_SUCCESS"
      ]
    },
    {
      "name": "FundingStage",
      "values": [
        "FRIENDS_AND_FOOLS",
        "SEED_OF_DOUBT",
        "SERIES_ANXIETY",
        "SERIES_BURNOUT",
        "SERIES_CHAOS",
        "SERIES_DESPERATION",
        "IPO_OR_RIP"
      ]
    }
  ],
  "relationships": [
    {
      "type": "one-to-many",
      "from": {
        "table": "Founder",
        "field": "id"
      },
      "to": {
        "table": "Startup",
        "field": "founder_id"
      }
    },
    {
      "type": "one-to-many",
      "from": {
        "table": "Investor",
        "field": "id"
      },
      "to": {
        "table": "Startup",
        "field": "investor_id"
      }
    },
    {
      "type": "many-to-many",
      "from": {
        "table": "Startup",
        "field": "id"
      },
      "to": {
        "table": "BuzzwordCategory",
        "field": "id"
      },
      "through": {
        "table": "StartupBuzzword",
        "fromField": "startup_id",
        "toField": "buzzword"
      }
    }
  ]
}