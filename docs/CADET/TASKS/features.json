{
  "version": "1.0.0",
  "timestamp": "2025-01-02T00:00:00Z",
  "features": {
    "WP1": {
      "id": "WP1",
      "name": "Lock-Aware DDL Execution",
      "description": "Foundation for safe DDL operations with proper lock management",
      "priority": 1,
      "effort_hours": 40,
      "business_value": 10,
      "risk_score": 8,
      "dependencies": [],
      "capabilities": [
        "DDL operation classification by lock level",
        "CREATE INDEX CONCURRENTLY orchestration",
        "Transaction-scoped advisory locking",
        "SET LOCAL timeout configuration",
        "Checkpoint state persistence",
        "Lock impact explanation",
        "Partitioned table index handling"
      ],
      "acceptance_criteria": [
        "All operations classified by PostgreSQL lock level",
        "CIC runs outside transaction blocks",
        "Only one CIC per table at a time",
        "Advisory locks prevent concurrent migrations",
        "Checkpoint recovery tested"
      ]
    },
    "WP2": {
      "id": "WP2",
      "name": "Safety Rails",
      "description": "Patterns to prevent blocking production operations",
      "priority": 2,
      "effort_hours": 35,
      "business_value": 9,
      "risk_score": 6,
      "dependencies": ["WP1"],
      "capabilities": [
        "NOT VALID pattern for foreign keys",
        "Deferred constraint validation",
        "Unique constraint via index pattern",
        "Instant column defaults (PG11+)",
        "Shadow column strategy for type changes",
        "Circular FK handling with DEFERRABLE",
        "Computed column trigger generation"
      ],
      "acceptance_criteria": [
        "All constraints use safe patterns",
        "Type changes don't lock tables",
        "Validation scheduled for low traffic",
        "Circular dependencies handled",
        "Computed columns work cross-table"
      ]
    },
    "WP3": {
      "id": "WP3",
      "name": "Developer Experience",
      "description": "Tools for rapid development and type safety",
      "priority": 3,
      "effort_hours": 30,
      "business_value": 7,
      "risk_score": 3,
      "dependencies": ["WP1"],
      "capabilities": [
        "Watch mode with chokidar",
        "GraphQL ESLint integration",
        "GraphQL Code Generator setup",
        "Zod validator generation",
        "Schema drift detection",
        "Migration explain mode",
        "Dry-run with full SQL",
        "Progress monitoring"
      ],
      "acceptance_criteria": [
        "Watch mode responds in < 200ms",
        "Types and validators generated",
        "Drift detection catches changes",
        "Explain shows lock levels",
        "Progress visible during execution"
      ]
    },
    "WP4": {
      "id": "WP4",
      "name": "Production Features",
      "description": "Enterprise-grade reliability and observability",
      "priority": 4,
      "effort_hours": 35,
      "business_value": 8,
      "risk_score": 5,
      "dependencies": ["WP1", "WP2"],
      "capabilities": [
        "Dead column detection via pg_stat_statements",
        "Resource bottleneck analysis",
        "Checkpoint recovery system",
        "Migration rollback generation",
        "Backfill batching logic",
        "Validation window scheduling"
      ],
      "acceptance_criteria": [
        "Dead columns detected with confidence levels",
        "Checkpoints tested with failures",
        "Rollback scripts generated",
        "Backfill respects batch sizes",
        "Resource conflicts identified"
      ]
    },
    "WP5": {
      "id": "WP5",
      "name": "Testing & Quality",
      "description": "Comprehensive test coverage and validation",
      "priority": 5,
      "effort_hours": 25,
      "business_value": 6,
      "risk_score": 2,
      "dependencies": ["WP1", "WP2", "WP3"],
      "capabilities": [
        "Property-based testing with fast-check",
        "Snapshot testing with Vitest",
        "SQL round-trip validation",
        "Integration test suite",
        "Performance benchmarks"
      ],
      "acceptance_criteria": [
        "100% test coverage achieved",
        "Property tests find no crashes",
        "Snapshots prevent regressions",
        "Integration tests pass",
        "Performance meets targets"
      ]
    },
    "WP6": {
      "id": "WP6",
      "name": "Refactoring & Cleanup",
      "description": "Address architecture debt and improve code quality",
      "priority": 6,
      "effort_hours": 15,
      "business_value": 4,
      "risk_score": 1,
      "dependencies": [],
      "capabilities": [
        "Split multi-class files",
        "Add JSDoc documentation",
        "Update import statements",
        "Enforce SRP principle",
        "Standardize naming conventions"
      ],
      "acceptance_criteria": [
        "One class per file",
        "All tests still pass",
        "Documentation complete",
        "No circular dependencies",
        "ESLint passes"
      ]
    }
  },
  "metrics": {
    "total_effort": 180,
    "critical_path_length": 110,
    "parallelization_potential": 0.39,
    "risk_weighted_value": 44,
    "resource_peaks": {
      "database_connection": 8,
      "memory_gb": 2,
      "cpu_cores": 4
    }
  },
  "constraints": {
    "blocking_resources": [
      "database_connection",
      "file_system_writes",
      "child_process_spawning"
    ],
    "team_size": 3,
    "deadline_days": 30,
    "budget_hours": 200
  }
}